<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link rel="icon" type="image/x-icon" href="/img/logoFace.svg">
        <!-- Bootstrap Grid Stylesheet -->
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->  
	
        <link rel="stylesheet" href="/css/products-form.css">
        <script src="https://kit.fontawesome.com/6fda1860f4.js" crossorigin="anonymous"></script>

		<script src="https://code.iconify.design/2/2.1.2/iconify.min.js"></script>

        <title>Edición de productos</title>
    </head>
<body>
	<!-- Header -->
	<%- include('partials/header') %>
	<!-- /Header -->
	<main class="credit">
		<form action="/products/edit/<%=productToEdit.id%>?_method=PATCH" method="POST" enctype="multipart/form-data">
			<div class="image-container">
				<img src="/img/logoFace.png" alt="">
			</div>
			<h1 class="products-title">Estás editando a <i><%=productToEdit.productName%></i></h1>
			<label for="productName" class="form-label">
				<input type="text" id="productName" name="productName" class="form-input" value="<%=productToEdit.productName%>">
				<% if (locals.errors && errors.productName) { %>
                    <div class="text-danger">
                        <%= errors.productName.msg %> 
                    </div>
                <% } %>
			</label>
			<label for="description" class="form-label">
				<textarea name="description" id="description" class="form-input"><%=productToEdit.description%></textarea>
				<% if (locals.errors && errors.description) { %>
					<div class="text-danger">
						<%= errors.description.msg %> 
					</div>
				<% } %>
			</label>
			<label for="image">
				<div  class="file-upload"> 
					<p>Imagen del producto</p>
					<input  type="file" name="image" id="image" accept=".jpg" > 
				</div>	
				<% if (locals.errors && errors.image) { %>
                    <div class="text-danger">
                        <%= errors.image.msg %> 
                    </div>
                <% } %>				
			</label>			
			<label for="category">
				<select name="category" id="category" class="form-input">
				<option value="">Elegí una categoría</option>
				<%  
					let categories = ['series infantiles', 'series adultos', 'peliculas', 'Anime'];
				%>
				<% for (const oneCategory of categories) { %>
					<option 
						value="<%= oneCategory %>"
						<%= locals.oldData && (oneCountry === old.category) ? 'selected' : null %> 
					> <%= oneCategory %> </option>
				<% } %>
				</select>
				<% if (locals.errors && errors.category) { %>
					<div class="text-danger">
						<%= errors.category.msg %>
					</div>
				<% } %>
			</label>
			<label for="price" class="form-label">
				<input type="text" id="price" name="price" value="<%=productToEdit.price%>" class="form-input">
				<% if (locals.errors && errors.price) { %>
                    <div class="text-danger">
                        <%= errors.price.msg %> 
                    </div>
                <% } %>
			</label>
			<div class="buttons">
                <input type="submit" value="Editar producto" class="btn">
            </div>			

		</form>
		
		<form action="/products/delete/<%=productToEdit.id%>?_method=delete" method="POST" enctype="multipart/form-data">
			<div class="buttons">
				<input type="submit" value="Eliminar producto" class="btn">
			</div>			
		</form>
		
	</main>
	<!-- /todos los productos -->

	<!-- footer -->
	<%- include("./partials/footer.ejs")%>
	<!-- /footer -->
</body>	
</html>